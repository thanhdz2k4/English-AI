# üìö English AI - ·ª®ng D·ª•ng Luy·ªán Vi·∫øt Ti·∫øng Anh

## 1. T·ªïng Quan D·ª± √Ån

### 1.1. M√¥ T·∫£
**English AI** l√† m·ªôt ·ª©ng d·ª•ng web h·ªó tr·ª£ ng∆∞·ªùi d√πng luy·ªán t·∫≠p vi·∫øt ti·∫øng Anh th√¥ng qua c√°c cu·ªôc h·ªôi tho·∫°i t∆∞∆°ng t√°c v·ªõi AI. ·ª®ng d·ª•ng gi√∫p ng∆∞·ªùi d√πng c·∫£i thi·ªán k·ªπ nƒÉng vi·∫øt c√¢u ƒë√∫ng ng·ªØ ph√°p, m·ªü r·ªông v·ªën t·ª´ v√† h·ªçc c√°ch di·ªÖn ƒë·∫°t t·ª± nhi√™n h∆°n.

### 1.2. M·ª•c Ti√™u
- Gi√∫p ng∆∞·ªùi d√πng **luy·ªán t·∫≠p vi·∫øt c√¢u ti·∫øng Anh** theo c√°c ch·ªß ƒë·ªÅ t·ª± ch·ªçn
- **Ki·ªÉm tra ng·ªØ ph√°p** v√† c·∫•u tr√∫c c√¢u theo th·ªùi gian th·ª±c
- **ƒê·ªÅ xu·∫•t c·∫£i thi·ªán** c√¢u vi·∫øt ƒë·ªÉ ng∆∞·ªùi d√πng h·ªçc c√°ch di·ªÖn ƒë·∫°t hay h∆°n
- **L∆∞u tr·ªØ l·ªói sai** ƒë·ªÉ ng∆∞·ªùi d√πng c√≥ th·ªÉ √¥n t·∫≠p v√† tr√°nh l·∫∑p l·∫°i

### 1.3. ƒê·ªëi T∆∞·ª£ng S·ª≠ D·ª•ng
- H·ªçc sinh, sinh vi√™n ƒëang h·ªçc ti·∫øng Anh
- Ng∆∞·ªùi ƒëi l√†m c·∫ßn c·∫£i thi·ªán k·ªπ nƒÉng vi·∫øt ti·∫øng Anh
- B·∫•t k·ª≥ ai mu·ªën luy·ªán t·∫≠p vi·∫øt ti·∫øng Anh giao ti·∫øp

---

## 2. T√≠nh NƒÉng Chi Ti·∫øt

### 2.1. üìù Luy·ªán T·∫≠p Vi·∫øt C√¢u (Writing Practice)

#### Flow Ho·∫°t ƒê·ªông:

```mermaid
flowchart TD
    A[üë§ Ng∆∞·ªùi d√πng nh·∫≠p ch·ªß ƒë·ªÅ] --> B[ü§ñ AI t·∫°o c√¢u h·ªèi/c√¢u m·ªü ƒë·∫ßu]
    B --> C[üë§ Ng∆∞·ªùi d√πng vi·∫øt c√¢u tr·∫£ l·ªùi]
    C --> D{üîç AI ki·ªÉm tra ng·ªØ ph√°p}
    D -->|‚úÖ ƒê√∫ng| E[üí° Hi·ªÉn th·ªã g·ª£i √Ω c·∫£i thi·ªán]
    D -->|‚ùå Sai| F[‚ö†Ô∏è Ch·ªâ ra l·ªói sai]
    F --> G[üìù L∆∞u l·ªói v√†o l·ªãch s·ª≠]
    G --> C
    E --> H{ƒê·ªß 7-8 c√¢u?}
    H -->|Ch∆∞a| B
    H -->|ƒê·ªß| I[üéâ Ho√†n th√†nh & L∆∞u k·∫øt qu·∫£]
```

#### Chi Ti·∫øt T·ª´ng B∆∞·ªõc:

| B∆∞·ªõc | Ng∆∞·ªùi Th·ª±c Hi·ªán | H√†nh ƒê·ªông | M√¥ T·∫£ |
|------|-----------------|-----------|-------|
| 1 | Ng∆∞·ªùi d√πng | Nh·∫≠p ch·ªß ƒë·ªÅ | V√≠ d·ª•: "ƒëi ch∆°i", "daily life", "shopping" |
| 2 | AI | T·∫°o c√¢u m·ªü ƒë·∫ßu | AI t·∫°o c√¢u h·ªèi ho·∫∑c c√¢u n√≥i ƒë·∫ßu ti√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªôi tho·∫°i |
| 3 | Ng∆∞·ªùi d√πng | Vi·∫øt c√¢u tr·∫£ l·ªùi | Ng∆∞·ªùi d√πng vi·∫øt c√¢u ti·∫øng Anh ph·∫£n h·ªìi |
| 4 | AI | Ki·ªÉm tra ng·ªØ ph√°p | Ki·ªÉm tra c·∫•u tr√∫c c√¢u, ng·ªØ ph√°p, ch√≠nh t·∫£ |
| 5a | AI (n·∫øu ƒë√∫ng) | G·ª£i √Ω c·∫£i thi·ªán | ƒê·ªÅ xu·∫•t c√°ch vi·∫øt hay h∆°n, t·ª± nhi√™n h∆°n |
| 5b | AI (n·∫øu sai) | Ch·ªâ ra l·ªói | Gi·∫£i th√≠ch l·ªói v√† y√™u c·∫ßu vi·∫øt l·∫°i |
| 6 | H·ªá th·ªëng | L∆∞u l·ªói sai | L∆∞u c√°c c√¢u sai v√†o database ƒë·ªÉ √¥n t·∫≠p sau |
| 7 | H·ªá th·ªëng | K·∫øt th√∫c | Sau 7-8 l∆∞·ª£t, k·∫øt th√∫c phi√™n v√† l∆∞u k·∫øt qu·∫£ |

#### V√≠ D·ª• Minh H·ªça:

```
üë§ Ng∆∞·ªùi d√πng: Ch·ªß ƒë·ªÅ "Daily Life"

ü§ñ AI: "What time do you usually wake up in the morning?"

üë§ Ng∆∞·ªùi d√πng: "I wake up at 7 o'clock every day."

‚úÖ AI: Correct! 
üí° Improvement: "I typically wake up at 7 AM every morning."

ü§ñ AI: "What do you usually have for breakfast?"

üë§ Ng∆∞·ªùi d√πng: "I eat bread and drink milk in breakfast."

‚ùå AI: Almost correct! 
‚ö†Ô∏è Error: "in breakfast" ‚Üí "for breakfast"
üìù Correction: "I eat bread and drink milk for breakfast."

(Ti·∫øp t·ª•c 5-6 c√¢u n·ªØa...)
```

### 2.2. üìä Xem L·∫°i L·ªói Sai (Mistake Review)

- Hi·ªÉn th·ªã danh s√°ch c√°c c√¢u ng∆∞·ªùi d√πng ƒë√£ vi·∫øt sai
- Cho ph√©p l·ªçc theo ch·ªß ƒë·ªÅ, th·ªùi gian, lo·∫°i l·ªói
- Cung c·∫•p b√†i t·∫≠p √¥n t·∫≠p d·ª±a tr√™n c√°c l·ªói th∆∞·ªùng g·∫∑p

---

## 3. Y√™u C·∫ßu K·ªπ Thu·∫≠t

### 3.1. Tech Stack

| Layer | Technology | M√¥ T·∫£ |
|-------|------------|-------|
| **Frontend** | ReactJS | Single Page Application |
| **Backend** | Java Spring Boot | Microservices Architecture |
| **Database** | PostgreSQL | Relational Database |
| **Deployment** | Railway | Cloud Platform |
| **Architecture** | Microservices + Data Mesh | Data as a Product |

### 3.2. Ki·∫øn Tr√∫c Microservices

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      Frontend (React)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     API Gateway                          ‚îÇ
‚îÇ              (Spring Cloud Gateway)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚ñº                   ‚ñº                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇWriting Service‚îÇ   ‚îÇ User Service  ‚îÇ   ‚îÇ  AI Service   ‚îÇ
‚îÇ - Sessions    ‚îÇ   ‚îÇ - Auth        ‚îÇ   ‚îÇ - Grammar     ‚îÇ
‚îÇ - Mistakes    ‚îÇ   ‚îÇ - Profile     ‚îÇ   ‚îÇ - Suggest     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                   ‚îÇ                   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚îÇ
                            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PostgreSQL                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 3.3. Data Mesh Concept

> [!NOTE]
> **Data as a Product**: M·ªói service s·ªü h·ªØu v√† qu·∫£n l√Ω domain data c·ªßa ri√™ng m√¨nh.

| Domain | Service | Data Ownership |
|--------|---------|----------------|
| Writing | Writing Service | Sessions, Conversations, Mistakes |
| User | User Service | Users, Profiles, Preferences |
| AI | AI Service | Prompts, Suggestions cache |

---

## 4. Database Schema

### 4.1. Entity Relationship Diagram

```mermaid
erDiagram
    USERS ||--o{ WRITING_SESSIONS : has
    WRITING_SESSIONS ||--o{ CONVERSATIONS : contains
    USERS ||--o{ USER_MISTAKES : has
    CONVERSATIONS ||--o| USER_MISTAKES : generates

    USERS {
        uuid id PK
        string email
        string password_hash
        string display_name
        timestamp created_at
        timestamp updated_at
    }

    WRITING_SESSIONS {
        uuid id PK
        uuid user_id FK
        string topic
        int total_turns
        string status
        timestamp started_at
        timestamp ended_at
    }

    CONVERSATIONS {
        uuid id PK
        uuid session_id FK
        int turn_number
        string ai_message
        string user_response
        boolean is_correct
        string error_feedback
        string improvement_suggestion
        timestamp created_at
    }

    USER_MISTAKES {
        uuid id PK
        uuid user_id FK
        uuid conversation_id FK
        string original_sentence
        string corrected_sentence
        string error_type
        string error_explanation
        boolean is_reviewed
        timestamp created_at
    }
```

### 4.2. Chi Ti·∫øt B·∫£ng

#### B·∫£ng `users`
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary key |
| email | VARCHAR(255) | Email ƒëƒÉng nh·∫≠p |
| password_hash | VARCHAR(255) | M·∫≠t kh·∫©u ƒë√£ m√£ h√≥a |
| display_name | VARCHAR(100) | T√™n hi·ªÉn th·ªã |
| created_at | TIMESTAMP | Th·ªùi gian t·∫°o |

#### B·∫£ng `writing_sessions`
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary key |
| user_id | UUID | FK ‚Üí users.id |
| topic | VARCHAR(200) | Ch·ªß ƒë·ªÅ h·ªôi tho·∫°i |
| total_turns | INT | S·ªë l∆∞·ª£t h·ªôi tho·∫°i (7-8) |
| status | ENUM | 'IN_PROGRESS', 'COMPLETED', 'ABANDONED' |
| started_at | TIMESTAMP | Th·ªùi gian b·∫Øt ƒë·∫ßu |
| ended_at | TIMESTAMP | Th·ªùi gian k·∫øt th√∫c |

#### B·∫£ng `conversations`
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary key |
| session_id | UUID | FK ‚Üí writing_sessions.id |
| turn_number | INT | L∆∞·ª£t th·ª© m·∫•y (1-8) |
| ai_message | TEXT | C√¢u h·ªèi/n√≥i c·ªßa AI |
| user_response | TEXT | C√¢u tr·∫£ l·ªùi c·ªßa ng∆∞·ªùi d√πng |
| is_correct | BOOLEAN | ƒê√∫ng ng·ªØ ph√°p hay kh√¥ng |
| error_feedback | TEXT | Ph·∫£n h·ªìi l·ªói (n·∫øu sai) |
| improvement_suggestion | TEXT | G·ª£i √Ω c·∫£i thi·ªán (n·∫øu ƒë√∫ng) |

#### B·∫£ng `user_mistakes`
| Column | Type | Description |
|--------|------|-------------|
| id | UUID | Primary key |
| user_id | UUID | FK ‚Üí users.id |
| conversation_id | UUID | FK ‚Üí conversations.id |
| original_sentence | TEXT | C√¢u g·ªëc (sai) |
| corrected_sentence | TEXT | C√¢u ƒë√£ s·ª≠a |
| error_type | VARCHAR(50) | Lo·∫°i l·ªói: GRAMMAR, SPELLING, STRUCTURE |
| error_explanation | TEXT | Gi·∫£i th√≠ch l·ªói |
| is_reviewed | BOOLEAN | ƒê√£ √¥n t·∫≠p ch∆∞a |

---

## 5. API Endpoints

### 5.1. Writing Service APIs

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/api/sessions` | T·∫°o phi√™n luy·ªán t·∫≠p m·ªõi |
| `GET` | `/api/sessions/{id}` | L·∫•y th√¥ng tin phi√™n |
| `POST` | `/api/sessions/{id}/respond` | G·ª≠i c√¢u tr·∫£ l·ªùi |
| `GET` | `/api/sessions/{id}/history` | L·∫•y l·ªãch s·ª≠ h·ªôi tho·∫°i |
| `POST` | `/api/sessions/{id}/complete` | K·∫øt th√∫c phi√™n |

### 5.2. Mistake Service APIs

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/api/mistakes` | L·∫•y danh s√°ch l·ªói sai |
| `GET` | `/api/mistakes/{id}` | Chi ti·∫øt m·ªôt l·ªói |
| `PUT` | `/api/mistakes/{id}/review` | ƒê√°nh d·∫•u ƒë√£ √¥n t·∫≠p |
| `GET` | `/api/mistakes/stats` | Th·ªëng k√™ l·ªói sai |

### 5.3. AI Service APIs

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/api/ai/generate-question` | T·∫°o c√¢u h·ªèi theo ch·ªß ƒë·ªÅ |
| `POST` | `/api/ai/check-grammar` | Ki·ªÉm tra ng·ªØ ph√°p |
| `POST` | `/api/ai/improve-sentence` | G·ª£i √Ω c·∫£i thi·ªán c√¢u |

---

## 6. Non-Functional Requirements

### 6.1. Performance
- Response time < 2 gi√¢y cho m·ªói request
- AI response time < 5 gi√¢y

### 6.2. Security
- JWT Authentication
- HTTPS/TLS encryption
- Password hashing (BCrypt)

### 6.3. Scalability
- Microservices cho ph√©p scale ƒë·ªôc l·∫≠p
- Database connection pooling

### 6.4. Availability
- Target uptime: 99%
- Railway auto-restart on failure

---

## 7. Glossary

| Thu·∫≠t Ng·ªØ | ƒê·ªãnh Nghƒ©a |
|-----------|------------|
| **Session** | M·ªôt phi√™n luy·ªán t·∫≠p vi·∫øt (7-8 c√¢u) |
| **Turn** | M·ªôt l∆∞·ª£t h·ªôi tho·∫°i (AI h·ªèi ‚Üí User tr·∫£ l·ªùi) |
| **Improvement** | G·ª£i √Ω c·∫£i thi·ªán c√¢u vi·∫øt hay h∆°n |
| **Mistake** | L·ªói sai ƒë∆∞·ª£c l∆∞u l·∫°i ƒë·ªÉ √¥n t·∫≠p |
| **Topic** | Ch·ªß ƒë·ªÅ h·ªôi tho·∫°i do ng∆∞·ªùi d√πng ch·ªçn |
